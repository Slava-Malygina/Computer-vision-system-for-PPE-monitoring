# Требования к прототипу системы распознавания средств индивидуальной защиты на производственных объектах

## 1. Введение

### 1.1 Назначение
Документ описывает требования к прототипу системы автоматического распознавания средств индивидуальной защиты (СИЗ) на производственных объектах.  
Система предназначена для выявления нарушений ношения касок, жилетов и перчаток сотрудниками и посетителями, с журналированием нарушений и возможностью уведомления ответственных лиц.

### 1.2 Соглашения, принятые в документах
Id требований:
- FR – функциональное требование;
- NFR – нефункциональное требование.

### 1.3 Границы проекта
Система предназначена для мониторинга ношения СИЗ на территории предприятия. Основные функции системы включают:
- распознавание касок, жилетов и перчаток на сотрудниках и посетителях;
- фиксацию нарушений в журнале с указанием даты, времени, типа нарушения и фотографии;
- предоставление интерфейса для просмотра камер в реальном времени и работы с журналом нарушений;
- генерацию отчетов о нарушениях;

Ограничения:
- система интегрируется с локальной сетью камер предприятия (на этапе прототипа – получает поток с одной камеры);
- система фокусируется исключительно на распознавании СИЗ (каски, жилеты, перчатки) и не учитывает другие аспекты безопасности;

## 2. Общее описание

### 2.1 Классы и характеристики пользователей
Система предназначена для следующих классов пользователей:

| Класс пользователя      | Характеристики                                      | Доступ к функциям |
|------------------------|----------------------------------------------------|------------------|
| Оператор мониторинга    | Пользователь с базовыми навыками работы с компьютером, наблюдает камеры и получает уведомления | Просмотр потока камеры, уведомления о нарушениях, просмотр журнала, формирование отчета для ответственных (например, за назначение штрафа) |

### 2.2 Операционная среда
Система будет работать в следующей среде:
- Аппаратная платформа: локальный сервер предприятия, рабочие станции пользователей;
- ОС: Windows;
- Камеры: любые производственные IP-камеры с поддержкой RTSP (может отправлять видеопоток напрямую на компьютер или сервер); прототип обеспечивает одновременную обработку одного потока;
- Географическое расположение: производственные площадки предприятия; сервер и рабочие станции находятся на территории предприятия.

### 2.4 Предположения и зависимости
**Предположения:**
- камеры предприятия обеспечивают стабильный RTSP-поток;
- пользователи имеют базовые навыки работы с компьютером;
- сервер и рабочие станции имеют достаточную производительность для обработки потоков видео.

**Зависимости:**
- система зависит от корректной работы камер и сети предприятия;
- необходимы библиотеки для обработки изображений и распознавания объектов;
- прототип предполагает локальное хранение данных.

## 3. Функции системы

### 3.1 Детекция СИЗ

#### 3.1.1 Описание
Система должна распознавать наличие и правильность ношения средств индивидуальной защиты (каска, жилет, перчатки) на видеопотоке.  
Приоритет: высокий.

#### 3.1.2 Функциональные требования
- FR1.1: Система должна определять наличие каски на голове сотрудника.
- FR1.2: Система должна определять наличие сигнального жилета.
- FR1.3: Система должна проверять, что жилет застёгнут.
- FR1.4: Система должна определять наличие перчаток и то, что они надеты на руки.

#### 3.1.3 Нефункциональные требования
- NFR1: Система должна обеспечивать точность распознавания СИЗ ≥ 90% на тестовом наборе изображений.
- NFR2: Система должна корректно работать при различном освещении на производстве.
- NFR3: Система должна поддерживать работу с потоками видео с любых установленных камер (любой ракурс).

### 3.2 Обработка и скорость работы

#### 3.2.1 Описание
Система должна анализировать видеопотоки в режиме близком к реальному времени. Мгновенная реакция не критична, но задержка должна быть минимальной.  
Приоритет: средний.

#### 3.2.2 Функциональные требования
- FR2.1: Система должна уметь обрабатывать видеопотоки (RTSP).
- FR2.2: Система должна поддерживать обработку 1 потока (на стадии прототипа).
- FR2.3: Система должна отображать результаты анализа в клиентском приложении – видео с границами объектов.

#### 3.2.3 Нефункциональные требования
- NFR2.1: Система должна обеспечивать обработку одного видеокадра на сервере не более чем за 5 секунд (прототип допускает буферизацию и обработку с задержкой).
- NFR2.2: Частота отображения ≥ 15 кадров/сек.
- NFR2.3: Обновление журнала ≤ 3 секунд.
- NFR2.4: Результат обработки (видео с выделенными областями детекции) должен отображаться на клиентском приложении не позднее чем через 2 секунды после завершения анализа кадра.

### 3.3 Журнал нарушений

#### 3.3.1 Описание
Система должна вести журнал всех нарушений для последующего анализа и отчетности.  
Приоритет: высокий.

#### 3.3.2 Функциональные требования
- FR3.1: Система должна фиксировать дату и время нарушения.
- FR3.2: Система должна сохранять скриншот кадра с выделенной областью нарушения.
- FR3.3: Система должна сохранять тип нарушения (каска, жилет, перчатки).
- FR3.4: Журнал должен поддерживать просмотр, фильтрацию, удаление записей, сортировку.
- FR3.5: Система должна давать возможность экспортировать журнал в Excel.
- FR3.6: При ошибке записи в журнал система должна автоматически повторять попытку сохранения.

### 3.4 Уведомления и интерфейс

#### 3.4.1 Описание
Система должна оповещать пользователей о нарушениях и предоставлять удобный интерфейс для мониторинга и работы с журналом.  
Приоритет: средний.

#### 3.4.2 Функциональные требования
- FR4.1: Система должна отображать уведомление при обнаружении нарушения.
- FR4.2: Система должна предоставлять интерфейс для просмотра потока с выделенными областями детекции.
- FR4.3: Интерфейс должен быть доступен в десктопной версии.
- FR4.5: Ошибки интерфейса должны фиксироваться в логах для диагностики.

### 3.5 Отчетность

#### 3.5.1 Описание
Система должна формировать отчеты по нарушениям для анализа руководством и контролирующими органами.  
Приоритет: средний.

#### 3.5.2 Функциональные требования
- FR5.1: Система должна формировать ежедневные отчеты по нарушениям.
- FR5.2: Система должна формировать еженедельные отчеты по нарушениям.
- FR5.3: Система должна предоставлять возможность в любое время сохранить отчеты в формате Excel.
- FR5.4: Система должна предоставлять возможность сохранения отфильтрованной и/или отсортированной версии журнала.
- FR5.5: В случае сбоя при формировании отчет должен быть автоматически пересоздан при следующем запуске.

## 4. Требования к данным

### 4.1 Словарь данных

| Описание               | Тип данных | Формат / диапазон                 |
|------------------------|-----------|---------------------------------|
| ID нарушения           | Уникальный идентификатор события | Целое число, автоинкремент |
| Дата и время           | Момент фиксации нарушения        | Дата/время, ISO 8601 (YYYY-MM-DD HH:MM:SS) |
| Камера                 | Источник видеопотока             | Строка, IP-адрес или идентификатор |
| Тип СИЗ                | Какой элемент был нарушен        | Строка: «каска», «жилет», «перчатки» |
| Описание нарушения     | Текстовое пояснение              | Строка, до 255 символов |
| Скриншот кадра         | Изображение кадра с выделением области | Файл (PNG), ≤ 500 Кб |

### 4.2 Отчеты
Система должна поддерживать генерацию отчетов:
- Ежедневный отчет — список всех нарушений за день с количеством по категориям СИЗ;
- Еженедельный отчет — агрегированные данные за неделю с динамикой по дням;

Формат: Excel (XLSX) и PDF.  
Отчеты должны содержать таблицы и диаграммы (гистограммы/круговые диаграммы).  
Пользователь может собрать и скачать отчет с необходимыми настройками фильтрации и сортировки.

### 4.3 Получение, целостность, хранение и утилизация данных
- Данные поступают в систему в реальном времени от IP-камер (RTSP).
- Все нарушения сохраняются в локальной базе данных.

**Требования:**
- Целостность данных обеспечивается транзакциями и проверкой уникальности записей;
- Журнал нарушений хранится минимум 1 год;
- Возможность восстановления данных после сбоя.

## 5. Требования к внешним интерфейсам

### 5.1 Пользовательские интерфейсы
Интерфейс в виде десктопного приложения.  

Основные окна:
- Мониторинг потока — просмотр видео с подсветкой областей детекции;
- Журнал нарушений — список событий с фильтрацией и сортировкой;
- Модуль отчетности — выбор периода и генерация отчетов;

Интерфейс должен быть интуитивным, поддерживать стандартные иконки и цветовые схемы.

### 5.2 Коммуникационные интерфейсы
- Локальная сеть предприятия (LAN, Wi-Fi, VPN).

**Требования:**
- Минимальная скорость передачи данных 10 Мбит/с;

## 6. Атрибуты качества

### 6.1 Удобство использования
- Ошибки и уведомления должны выводиться в виде всплывающих сообщений с понятными текстами.
- Поддержка локализации интерфейса (в прототипе — русский язык, возможность добавления английского).

### 6.2 Производительность
- Система должна поддерживать одновременную работу не менее 2 пользователей в клиентском приложении.
  Основные нефункциональные требования к прототипу описаны в пункте 3.2.
  Планы на развитие проекта:
- Поддержка нескольких потоков: ≥ 4 одновременно.
- Отображение видео: не ниже 15–25 кадров/сек.
- Журнал нарушений: хранение и отображение до 10 000+ записей, время загрузки ≤ 3 секунд.

### 6.4 Техника безопасности
- Система не должна вызывать сбоев в работе камер и другого оборудования предприятия.
- В случае недоступности сервера или клиента система должна корректно уведомить пользователя.
- Сбой обработки видеопотока не должен приводить к потере данных — запись в журнал должна фиксироваться при восстановлении соединения.

### 6.5 Надежность и устойчивость
- Автоматический перезапуск модуля обработки при сбое.
